{"componentChunkName":"component---src-templates-post-post-jsx","path":"/blog/keypaths-in-swift","result":{"data":{"markdownRemark":{"html":"<ul>\n<li><a href=\"#1---what-are-keypaths-in-swift\">1 - What are Keypaths in swift</a></li>\n<li><a href=\"#2---types-of-keypaths\">2 - Types of KeyPaths</a>\n<ul>\n<li><a href=\"#21-referencewritablekeypathroot-value\">2.1 ReferenceWritableKeyPath&#x3C;Root, Value></a></li>\n<li><a href=\"#22-writablekeypathroot-value\">2.2 WritableKeyPath&#x3C;Root, Value></a></li>\n<li><a href=\"#23-keypathroot-value\">2.3 KeyPath&#x3C;Root, Value></a></li>\n<li><a href=\"#24-partialkeypathroot\">2.4 PartialKeyPath<Root></a></li>\n<li><a href=\"#25-anykeypath\">2.5 AnyKeyPath</a></li>\n</ul>\n</li>\n<li><a href=\"#3---swift-52-key-path-as-functions\">3 - Swift 5.2: Key path as functions</a></li>\n<li><a href=\"#4---using-keypaths\">4 - Using keyPaths</a></li>\n<li><a href=\"#see-also\">See Also</a></li>\n<li><a href=\"#conclusion\">Conclusion</a></li>\n</ul>\n<h2>1 - What are Keypaths in swift</h2>\n<p>KeyPath is an object that stores a reference to a property of a type, that keyPath object allow us later on to get/set their underlying value ( defer/stash getter and setter evaluation when needed ) using subscript operator. you can then pass these keypaths objects around to create an API with shorter and cleaner syntax.</p>\n<p>let's see with an example, suppose we have a class Person:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n    \n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token constant\">nil</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>fullName <span class=\"token operator\">=</span> fullName\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>given the User we can then create a keyPath object for any instance property ( fullName, email, age ) of the User type and use that keyPath later on to get/set the property value on a specific user instance:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> fullNameKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName\n<span class=\"token comment\">// get fullName value using fullNameKeyPath</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> fullNameKeyPath<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// Mike</span>\n<span class=\"token comment\">// set fullName value using fullNameKeyPath</span>\nuser<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> fullNameKeyPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"John\"</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> fullNameKeyPath<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// John</span></code></pre></div>\n<p>and as you can see, the keyPath expression have the form <code class=\"language-text\">\\Root.path</code> and the KeyPath declaration is</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">KeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">Root</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">Value</span><span class=\"token operator\">></span> <span class=\"token punctuation\">:</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">Root</span><span class=\"token operator\">></span></code></pre></div>\n<p>keyPath takes two generic types: <code class=\"language-text\">Root Type</code> ( User is the example ) and <code class=\"language-text\">Value Type</code> which is the Type of the property the keyPath refers to ( String in case fullName, Int for age, String? for email ).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 652px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVQY052Pyw6CQAxF+f9/c+NCCPERjQYdJqPg8BhgeiQYjRIW4t20aW9PbgM+JCJDtdYShiFxHLHeNehLiagVVW6+fFMKpoDOOZRSZDeDNh1F1e/uCW3j5gHH5rru2B6gNSf8eYmUfyZ8VqGqGvZHwV1TRMd4m85POIYP7/a9FPo9nw18HXgvRBvIdA7J4qeEDzRc2GTUS3NVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"keypath example\"\n        title=\"keypath example\"\n        src=\"/static/cc93e19ecb07f965b79b3b7232199395/ef2ec/keypath_example.png\"\n        srcset=\"/static/cc93e19ecb07f965b79b3b7232199395/3e256/keypath_example.png 250w,\n/static/cc93e19ecb07f965b79b3b7232199395/b30f8/keypath_example.png 500w,\n/static/cc93e19ecb07f965b79b3b7232199395/ef2ec/keypath_example.png 652w\"\n        sizes=\"(max-width: 652px) 100vw, 652px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<blockquote>\n<p>Note: at compile time, a key-path expression ( <code class=\"language-text\">\\Root.path</code> ) is replaced by an instance of the keyPath class of the appropriate keyPath type ( we have 5 types of keypaths )</p>\n</blockquote>\n<p>you can also make the keyPath expression nested or compound like,</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> fullNameEmptyKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName<span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> fullNameEmptyKeyPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// false</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> fullNamePath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName\n<span class=\"token keyword\">let</span> isEmptyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">String</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">isEmpty</span>\n\n<span class=\"token keyword\">let</span> fullNameIsEmptyKeyPath <span class=\"token operator\">=</span> fullNamePath<span class=\"token punctuation\">.</span><span class=\"token function\">appending</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">:</span> isEmptyPath<span class=\"token punctuation\">)</span> <span class=\"token comment\">// merge the two paths</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> fullNameIsEmptyKeyPath<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// read keyPath value -> false</span></code></pre></div>\n<p>and here the keyPath <code class=\"language-text\">Root</code> type is <code class=\"language-text\">User</code> and the <code class=\"language-text\">Value</code> is <code class=\"language-text\">Bool</code> ( isEmpty is Bool ) so the fullNameIsEmptyKeyPath is of type  <code class=\"language-text\">KeyPath&lt;User, Bool&gt;</code></p>\n<h2>2 - Types of KeyPaths</h2>\n<p>we have 5 types of keypaths represented by a hierarchy of 5 generic classes: <code class=\"language-text\">ReferenceWritableKeyPath</code> inherits from <code class=\"language-text\">WritableKeyPath</code> and <code class=\"language-text\">WritableKeyPath</code> inherits from <code class=\"language-text\">KeyPath</code> and so on.</p>\n<blockquote>\n<p>Note:  that hierarchy means ( for example ) if you have a function that takes <code class=\"language-text\">KeyPath&lt;Root,Type&gt;</code> as a parameter then you can pass also a keyPath of type <code class=\"language-text\">WritableKeyPath</code> and  <code class=\"language-text\">ReferenceWritableKeyPath</code> as a parameter to hat function because both of theme inherits from <code class=\"language-text\">KeyPath&lt;Root,Type&gt;</code>  but you cannot pass in a parameter of type <code class=\"language-text\">PartialKeyPath</code> or <code class=\"language-text\">AnyKeyPath</code></p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 711px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8klEQVQoz51S0W6EIBD0/3+uNhrt6Xla4SrGy/UoKBSRKZq0SS2+dBJCwm5mZ2eIEIBzbrvneUae54jjGEVR+PflVz2E6IjMWgutNTjnGIYbxlH5ActP/Yg02pN9NyqlUFUVTqcCefaE8nJDTVfV5n+E0zShbVtQQtGQT2j+gH2QzYZ9b5Bwv4oxBldKwVgP8rZglne4jyusC/cfKlwhpURZlptCQlq8NmcQ5m3wfrr7BcYe+xiFwhBCoOs6UK9wPXXdgPUTxLuA4QOsHuEWH1Bg9T+EjDEkSbIpXL9MmqbIsswH84yXs0LPDJYuhpY86OUXRY9uO8NjAosAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"keypath types\"\n        title=\"keypath types\"\n        src=\"/static/743b233a6b0ef61a6557135198b8e0c9/32cb2/keypath_types.png\"\n        srcset=\"/static/743b233a6b0ef61a6557135198b8e0c9/3e256/keypath_types.png 250w,\n/static/743b233a6b0ef61a6557135198b8e0c9/b30f8/keypath_types.png 500w,\n/static/743b233a6b0ef61a6557135198b8e0c9/32cb2/keypath_types.png 711w\"\n        sizes=\"(max-width: 711px) 100vw, 711px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>let's explore the different keypaths types one by one and see when they can be used.</p>\n<h3>2.1 ReferenceWritableKeyPath&#x3C;Root, Value></h3>\n<p><code class=\"language-text\">ReferenceWritableKeyPath</code> works with Root of reference types ( class ) and mutable properties ( var ), this allows to read and write ( change ) the property value.</p>\n<p>This is the one we have seen already in the previous example, as the User is class/reference type and the fullName property is var</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> fullNameKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> fullNameKeyPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ReferenceWritableKeyPath&lt;User, String></span></code></pre></div>\n<blockquote>\n<p>Note: it doesn't matter wether the instance itself is var or let, what matters is the keyPath property should be mutable ( var ) to be able to change/write its value.</p>\n</blockquote>\n<h3>2.2 WritableKeyPath&#x3C;Root, Value></h3>\n<p><code class=\"language-text\">WritableKeyPath</code> works will Root of value types ( struct and enum ) and again allow us to read/write the keyPath property value of an instance taking into account the property should be var and the instance should be var also.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// instance should be var</span>\n<span class=\"token keyword\">let</span> ageKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>age\n<span class=\"token comment\">// get fullName</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 16 </span>\n<span class=\"token comment\">// set fullName</span>\nuser<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 20</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// WritableKeyPath&lt;User, Int></span></code></pre></div>\n<h3>2.3 KeyPath&#x3C;Root, Value></h3>\n<p>KeyPath is the simplest type, it can be used with both reference types ( classes ) and value types ( struct and enum ) as a <code class=\"language-text\">Root type</code>. it is used only for read property value ( read-only ) so it is only used for accessing immutable ( let ) properties.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span> <span class=\"token punctuation\">{</span>  <span class=\"token comment\">// or it can be -> class User </span>\n    <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">let</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span> <span class=\"token comment\">// Note: age is immutable</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> ageKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>age\n<span class=\"token comment\">// get age</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 16</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token function\">type</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// KeyPath&lt;User, Int></span></code></pre></div>\n<p>and if we tried changing the property value using the <code class=\"language-text\">ageKeyPath</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\">user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> ageKeyPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">20</span>  <span class=\"token comment\">// error: cannot assign through subscript: 'ageKeyPath' is a read-only key path</span></code></pre></div>\n<h3>2.4 PartialKeyPath<Root></h3>\n<p>in the previous three keyPath types we know the two required types : the <code class=\"language-text\">Root type</code> ( User in our example ) and the <code class=\"language-text\">Value Type</code> ( String for fullName or Int for age ).  But if we don't know the <code class=\"language-text\">Value type</code> of our keyPath or we need to be more flexible about the value type then we can use the <code class=\"language-text\">PartialKeyPath&lt;Root&gt;</code> which takes a reference to a property of any <code class=\"language-text\">ValueType</code> from specific <code class=\"language-text\">Root type</code>. this is beneficial when we need to write a functions that accepts a KeyPaths of different Value types but the same Root Type or we need to store multiple keyPaths of different Value types in an array.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">let</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"aaa@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> agePartialKeyPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">User</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>age\n<span class=\"token keyword\">let</span> emailPartialKeyPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">User</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>email\n<span class=\"token keyword\">let</span> fullNamePartialKeyPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">User</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName\n\n<span class=\"token keyword\">let</span> keyPathsList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">User</span><span class=\"token operator\">></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>agePartialKeyPath<span class=\"token punctuation\">,</span>emailPartialKeyPath<span class=\"token punctuation\">,</span>fullNamePartialKeyPath<span class=\"token punctuation\">]</span>\nkeyPathsList<span class=\"token punctuation\">.</span>forEach <span class=\"token punctuation\">{</span> keypath <span class=\"token keyword\">in</span>\n    <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keypath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 16, Optional(\"aaa@test.com\"), Mike</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2.5 AnyKeyPath</h3>\n<p>AnyKeyPath is the least restrictive one. it is fully type erased keyPath that can be used when the <code class=\"language-text\">Root Type</code> is unknown and the <code class=\"language-text\">Value Type</code> ( Path) is also unknown. this is very beneficial when we want to create an API that takes a keyPath of different Root types or we want to store multiple KeyPaths of different Root Types in an array.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">Cat</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"aaa@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> userAgeKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>age <span class=\"token comment\">// ReferenceWritableKeyPath&lt;User, Int></span>\n<span class=\"token keyword\">let</span> userEmailKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>email <span class=\"token comment\">// ReferenceWritableKeyPath&lt;User, Optional&lt;String>></span>\n<span class=\"token keyword\">let</span> userFullNameKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName <span class=\"token comment\">// ReferenceWritableKeyPath&lt;User, String></span>\n\n<span class=\"token keyword\">var</span> cat <span class=\"token operator\">=</span> <span class=\"token function\">Cat</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Nala\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> catNameKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">Cat</span><span class=\"token punctuation\">.</span>name <span class=\"token comment\">// WritableKeyPath&lt;Cat, String></span>\n\n<span class=\"token keyword\">let</span> keyPathsList<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">AnyKeyPath</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>userAgeKeyPath<span class=\"token punctuation\">,</span>userEmailKeyPath<span class=\"token punctuation\">,</span>userFullNameKeyPath<span class=\"token punctuation\">,</span>catNameKeyPath<span class=\"token punctuation\">]</span>\n\nkeyPathsList<span class=\"token punctuation\">.</span>forEach <span class=\"token punctuation\">{</span> keypath <span class=\"token keyword\">in</span>\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> keypath <span class=\"token operator\">=</span> keypath <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">User</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keypath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// // 16, Optional(\"aaa@test.com\"), Mike</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> keypath <span class=\"token operator\">=</span> keypath <span class=\"token keyword\">as</span><span class=\"token operator\">?</span> <span class=\"token builtin\">PartialKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">Cat</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>cat<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keypath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Nala</span>\n    <span class=\"token punctuation\">}</span>\n   \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>here we create keypaths of different Value types and different Root types then we store them in an array of type AnyKeyPath.</p>\n<p>since we are using AnyKeyPath we don't know any information about both the keypath Root type or the value Type and this is why we are trying to cast the <code class=\"language-text\">keypath</code> to <code class=\"language-text\">PartialKeyPath&lt;User&gt;</code> ( getter return Any ). we can for sure try to cast it to a more specific keypath like <code class=\"language-text\">KeyPath&lt;Cat, String&gt;</code> or <code class=\"language-text\">KeyPath&lt;User, String&gt;</code> and if the casting succeeds we know exactly both the <code class=\"language-text\">Root Type</code> and the <code class=\"language-text\">Value Type</code>.</p>\n<p>let's recap,</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">KeyPath Type</th>\n<th align=\"center\">Read</th>\n<th align=\"left\">Write</th>\n<th align=\"center\">Note</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">AnyKeyPath</td>\n<td align=\"center\">Yes</td>\n<td align=\"left\">No</td>\n<td align=\"center\">unknown Root Type/ unknown Value Type</td>\n</tr>\n<tr>\n<td align=\"center\">PartialKeyPath</td>\n<td align=\"center\">Yes</td>\n<td align=\"left\">No</td>\n<td align=\"center\">known Root Type / unknown Value Type</td>\n</tr>\n<tr>\n<td align=\"center\">KeyPath</td>\n<td align=\"center\">Yes</td>\n<td align=\"left\">No</td>\n<td align=\"center\">known Root Type / known Value Type</td>\n</tr>\n<tr>\n<td align=\"center\">WritableKeyPath</td>\n<td align=\"center\">Yes</td>\n<td align=\"left\">Yes</td>\n<td align=\"center\">known Root Type / known Value Type for value types ( struct and enum ) ( var instance )</td>\n</tr>\n<tr>\n<td align=\"center\">ReferenceWritableKeyPath</td>\n<td align=\"center\">Yes</td>\n<td align=\"left\">Yes</td>\n<td align=\"center\">known Root Type / known Value Type, for class Type ( let or var instance)</td>\n</tr>\n</tbody>\n</table>\n<h2>3 - Swift 5.2: Key path as functions</h2>\n<p>Because closures of the form: <code class=\"language-text\">(Root Type ) -&gt; Value</code> are common in Swift, Key path as functions is one of the features added to swift 5.2. it allows keypath to automatically be promoted and used wherever a functions of the form  <code class=\"language-text\">(Root ) -&gt; Value</code> are expected.</p>\n<p>let's assume we have a list of users and we need to extract their full names,</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">struct</span> <span class=\"token builtin\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> fullName<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span>\n    <span class=\"token keyword\">var</span> email<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token operator\">?</span>\n    <span class=\"token keyword\">var</span> age<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> firstUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"mike@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> secondUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Adam\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"adam@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> <span class=\"token builtin\">ThirdUser</span> <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"jogn@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>firstUser<span class=\"token punctuation\">,</span>secondUser<span class=\"token punctuation\">,</span><span class=\"token builtin\">ThirdUser</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">let</span> usersNames <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span> <span class=\"token punctuation\">{</span> $<span class=\"token number\">0</span><span class=\"token punctuation\">.</span>fullName <span class=\"token punctuation\">}</span> <span class=\"token comment\">// original</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>usersNames<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"Mike\", \"Adam\", \"John\"]</span></code></pre></div>\n<p>here we are passing to the map a function of the form <code class=\"language-text\">( User ) -&gt; String</code> return the users full names, in swift 5.2 we can instead pass a keypath for the user fullName property and pass it to the map.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> usersNames <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span> <span class=\"token punctuation\">(</span>\\<span class=\"token punctuation\">.</span>fullName<span class=\"token punctuation\">)</span> <span class=\"token comment\">// using keypath</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>usersNames<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// [\"Mike\", \"Adam\", \"John\"]</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> fullNameKeyPath<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">User</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">String</span> <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName\n<span class=\"token keyword\">let</span> usersNames <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span> <span class=\"token punctuation\">(</span> fullNameKeyPath <span class=\"token punctuation\">)</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>usersNames<span class=\"token punctuation\">)</span></code></pre></div>\n<p>but this way we need to be explicit about the keypath type <code class=\"language-text\">let fullNameKeyPath: (User) -&gt; String</code>, because <code class=\"language-text\">let fullNameKeyPath = \\User.fullName</code> is inferred as a keypath object not as a function ( default behavior ). by making the type explicit we are using the <code class=\"language-text\">fullNameKeyPath</code> as a function not as a keypath object.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> fullNameKeyPath <span class=\"token operator\">=</span> \\<span class=\"token builtin\">User</span><span class=\"token punctuation\">.</span>fullName <span class=\"token comment\">// inferred as WritableKeyPath&lt;User, String></span>\n<span class=\"token keyword\">let</span> usersNames <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span> <span class=\"token punctuation\">(</span> fullNameKeyPath <span class=\"token punctuation\">)</span> <span class=\"token comment\">// Error</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>usersNames<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>4 - Using keyPaths</h2>\n<p>keypaths can be used on collection types to create generic algorithms and APIs with shorter and cleaner syntax. for instance let's say we want to sort an array containing elements of any Type and sort it by a specific property. with keypaths,</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">extension</span> <span class=\"token builtin\">Sequence</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">func</span> <span class=\"token builtin\">sorted</span><span class=\"token operator\">&lt;</span>T<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Comparable</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>by keyPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">KeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">Element</span><span class=\"token punctuation\">,</span> T<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Element</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token builtin\">sorted</span> <span class=\"token punctuation\">{</span> a<span class=\"token punctuation\">,</span> b <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keyPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keyPath<span class=\"token punctuation\">]</span>  <span class=\"token comment\">// read</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> firstUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Mike\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"mike@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> secondUser <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Adam\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"adam@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> <span class=\"token builtin\">ThirdUser</span> <span class=\"token operator\">=</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span>fullName<span class=\"token punctuation\">:</span> <span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"john@test.com\"</span><span class=\"token punctuation\">,</span> age<span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">var</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>firstUser<span class=\"token punctuation\">,</span>secondUser<span class=\"token punctuation\">,</span><span class=\"token builtin\">ThirdUser</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span>by<span class=\"token punctuation\">:</span> \\<span class=\"token punctuation\">.</span>fullName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// [User(fullName: \"Adam\", email: Optional(\"adam@test.com\"), age: 25),</span>\n<span class=\"token comment\">// User(fullName: \"John\", email: Optional(\"john@test.com\"), age: 30),</span>\n<span class=\"token comment\">// User(fullName: \"Mike\", email: Optional(\"mike@test.com\"), age: 20)]</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"AB\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span>by<span class=\"token punctuation\">:</span> \\<span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"A\", \"AB\", \"C\", \"D\"]</span>\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"AB\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">sorted</span><span class=\"token punctuation\">(</span>by<span class=\"token punctuation\">:</span> \\<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"C\", \"D\", \"A\", \"AB\"]</span></code></pre></div>\n<p>here we created an <code class=\"language-text\">extension</code> to the <code class=\"language-text\">Sequence</code> type, adding a new <code class=\"language-text\">sorted(by keyPath:)</code> that takes a keypath to sort the array based on that keypath value, so we can sort array of users by fullName, email, age or sort any array based on any Comparable property.</p>\n<p>another example could be if we want to update a UILabel properties in a shorter syntax, we can do something like:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">protocol</span> <span class=\"token builtin\">Builder</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">Builder</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">func</span> <span class=\"token keyword\">set</span><span class=\"token operator\">&lt;</span>T<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> keyPath<span class=\"token punctuation\">:</span><span class=\"token builtin\">ReferenceWritableKeyPath</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">Self</span><span class=\"token punctuation\">,</span> T<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>to newValue<span class=\"token punctuation\">:</span> T<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token keyword\">Self</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">[</span>keyPath<span class=\"token punctuation\">:</span> keyPath<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> newValue  <span class=\"token comment\">// change property value</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">self</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">UILabel</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">Builder</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> label <span class=\"token operator\">=</span> <span class=\"token function\">UILabel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>\\<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Hello world\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>\\<span class=\"token punctuation\">.</span>textColor<span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>red<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">(</span>\\<span class=\"token punctuation\">.</span>font<span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span><span class=\"token function\">systemFont</span><span class=\"token punctuation\">(</span>ofSize<span class=\"token punctuation\">:</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span> weight<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>medium<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<blockquote>\n<p>Note:  if you want to apply this to any <code class=\"language-text\">UIKit</code> component, just make it conform to the Builder protocol just like we did with the <code class=\"language-text\">UILabel</code> like extension <code class=\"language-text\">extension UIButton: Builder { }</code>. but if we want to use this on any NSObject or any UIKit element then we can instead make the NSObject conforms to the Builder protocol <code class=\"language-text\">extension NSObject: Builder { }</code>.</p>\n</blockquote>\n<p>as you can see, keypaths enable us to create many APIs with shorter syntax like creating DSL for working with layout constraints, algorithms on collections types and many other use cases.</p>\n<h2>See Also</h2>\n<ul>\n<li><a href=\"https://github.com/vincent-pradeilles/KeyPathKit\" target=\"_blank\" rel=\"nofollow\">KeyPathKit</a>  provides many functions to manipulate data with syntax that relies on keypaths to make the call shorter and cleaner.</li>\n<li><a href=\"https://appventure.me/guides/keypaths/complete_book.html\" target=\"_blank\" rel=\"nofollow\">KeyPaths in Swift</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=p76XTTTDUlU\" target=\"_blank\" rel=\"nofollow\">The Underestimated Power of Keypaths - Swift Heroes 2019</a></li>\n<li><a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0161-key-paths.md\" target=\"_blank\" rel=\"nofollow\">Smart KeyPaths: Better Key-Value Coding for Swift proposal</a></li>\n<li><a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0249-key-path-literal-function-expressions.md\" target=\"_blank\" rel=\"nofollow\">Key Path Expressions as Functions Proposal</a></li>\n</ul>\n<h2>Conclusion</h2>\n<p>keypaths introduced in Swift 4 to overcome the old <code class=\"language-text\">#keyPath()</code> syntax limitations available in Swift 3. As you might know #keyPath() is represented using a String which has a number of limitations.</p>\n<ul>\n<li><code class=\"language-text\">#keyPath()</code> works only with NSObjects</li>\n<li>loss of type information, we don't know which type ( String,Int, ...etc ) the keypath refers to</li>\n</ul>\n<p>KeyPaths are great and type safe as compared to the old #keyPath(), allow us to create a generic algorithms and APIs that are shorter and cleaner. keypaths are also used in SwiftUI and Combine framework in several places to keep the API concise.</p>\n<p>If you think i missed anything, let me know and feel free to share with me any thoughts or feedback you have.</p>\n<p>Thanks for reading!</p>","timeToRead":12,"frontmatter":{"title":"KeyPaths in swift","date":"19 Jun 2021","tags":["Swift","IOS"],"path":"blog/keypaths-in-swift","excerpt":"KeyPaths are great and type safe as compared to the old \\#keyPath(), allow us to create a generic algorithms and APIs that are shorter and cleaner. keypaths are also used in SwiftUI and Combine framework in several places to keep the API concise","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='177'%20viewBox='0%200%20400%20177'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%2089v88h401V0H0v89m246%207c0%2010%200%2012%202%2012l1-5c0-4%201-6%202-7%204-4%207%200%207%208%200%203%200%204%202%204s2-9%200-13c-2-3-6-5-9-3-2%201-2%201-2-4l-1-5c-2%200-2%202-2%2013m-111%200c0%2011%200%2012%202%2012s2-1%202-3l2-5c2-2%202-2%206%203%203%204%205%205%207%205s1-1-3-6l-6-6%206-6c5-5%205-6%203-6s-4%202-9%206l-6%206v-6c0-5%200-6-2-6s-2%201-2%2012m101-8l-1%202-1%202-1%202%201%201%201%205c0%205%202%209%205%209%203-1%204-3%201-3-3-1-3-11%200-11l2-1-2-2-2-2c-1-2-2-4-3-2m-73%204c-6%202-6%2013%200%2016%205%202%2011%200%2010-3h-9c-3-2-2-3%202-4%208%200%208%200%208-2%200-5-6-9-11-7m40%200h-7v12c0%209%200%2011%202%2011l1-4c0-4%200-4%203-3%209%204%2015-11%206-16h-5m16%200l-4%204c-3%207%204%2015%2010%2012h4c2%200%202%200%202-8v-8h-12m48%200c-5%203-3%208%203%209%205%201%203%204-2%203-5%200-5%202-1%204s9%200%209-4c0-3-1-4-6-6-3-1-3-1-2-3h3c2%201%204%201%204-1l-3-2h-5m-88%207c3%205%204%208%203%209-3%205-3%207-1%207%201%200%208-12%2012-22l-2-1-4%205-2%206-3-6c-1-3-3-5-4-5-2%200-1%201%201%207m67%2028l-3%204c0%202-1%203-2%203v3c2%200%202%202%202%207s1%207%202%207%202-2%202-7c0-7%200-7%203-7l2-1c0-1-1-2-3-2-3%200-3-5%201-6l2-1c-1-2-5-2-6%200m9%205l-1%203v2l1%205c0%207%201%209%205%209%203%200%204-2%201-3-2%200-2-1-2-6%200-4%200-5%202-5l2-1-2-2-2-2-2-2-2%202m-90%2010c1%2010%203%2013%203%203%200-6%201-8%205-8%202%200%203%201%203%207%201%209%203%209%203%200%200-8-1-10-9-10h-5v8m29-7c-4%203-2%207%204%209%203%201%203%201%202%203h-4c-3-2-5%200-3%203%205%203%2011%200%2011-5%200-2-1-2-5-4-5-2-5-5%201-4%203%201%204%200%202-2h-8m12%200c0%202%204%2014%206%2015%202%202%203%200%205-6l1-4%202%205c3%206%204%207%205%205%202-2%206-15%206-16-2-1-4%201-5%206-2%206-2%206-4%200-2-8-4-8-7-1-2%207-2%207-4%201l-3-6-2%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":2.2522522522522523,"src":"/static/ef2e9b268003b9fbf87924e403989b6e/31987/keypaths_swift.png","srcSet":"/static/ef2e9b268003b9fbf87924e403989b6e/e1953/keypaths_swift.png 250w,\n/static/ef2e9b268003b9fbf87924e403989b6e/46604/keypaths_swift.png 500w,\n/static/ef2e9b268003b9fbf87924e403989b6e/31987/keypaths_swift.png 1000w,\n/static/ef2e9b268003b9fbf87924e403989b6e/7dea6/keypaths_swift.png 1287w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"blog/introduction-to-function-builders-in-swift","title":"Introduction to Function Builders in Swift","tags":["Swift","UIKit","IOS"],"excerpt":"Function builders is a swift language feature, first introduced in swift 5.1 available from Xcode 11. it helps in building declarative DSL ( Domain Specific Language ) for constructing user interface hierarchies.","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='225'%20viewBox='0%200%20400%20225'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%20113v112h401V112l-1-88v25h-15l-85-2h-71l-3%202c-2%202-2%203-2%207a3839%203839%200%20010%20114h-3l-3-2-2-1-5-3-6-2-3-2-2-1-4-2-5-3-4-2-16-7a332%20332%200%2000-22-11l-6-4-1-2c-3%200-14-12-14-15s0-3-2-2h-3l-4-5-7-14-2-4-1-8-2-8-1-8-1-8c-1%200-3-21-2-36l-1-12-1-4V0H0v113M341%201l3%202%205%202%204%203%202%201%209%203c5%202%207%203%208%205l4%202%207%201c4%200%209-3%209-6l2-3%204-10-29-1-28%201M230%2074l1%2035v15h41v-7l-1-26c-1-19-1-25%201-23v1h129l-9-1-8-1h8c7%200%208%200%208-2l-4-1-4-1h-2c-2%201-21%200-22-1v-1l-3-1-4-2h16l2-1h1l-46-1h-46a366%20366%200%2000-57-1l-1%2019m1%2074v22h68a970%20970%200%2000-24-2l-2-21v-20l-21-1h-21v22M56%20175l-16%201v9h68l4%201v-9h-5a787%20787%200%2000-51-2m-30%2013l-2%204v3l23%201%2040%202h17l2-3v-5l-22-1a442%20442%200%2001-58-1'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.7857142857142858,"src":"/static/0fecf9066aed5cc3e8c6601aeb23cde4/4fe8c/function_builders.jpg","srcSet":"/static/0fecf9066aed5cc3e8c6601aeb23cde4/aabdf/function_builders.jpg 150w,\n/static/0fecf9066aed5cc3e8c6601aeb23cde4/9dc27/function_builders.jpg 300w,\n/static/0fecf9066aed5cc3e8c6601aeb23cde4/4fe8c/function_builders.jpg 600w,\n/static/0fecf9066aed5cc3e8c6601aeb23cde4/9842e/function_builders.jpg 900w,\n/static/0fecf9066aed5cc3e8c6601aeb23cde4/47498/function_builders.jpg 1200w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/getting-started-with-diffable-data-source","title":"Getting Started with Diffable Data Source","tags":["Swift","UIKit","IOS"],"excerpt":"Diffable Data Source is a new declarative API for UITableView and its counterpart UICollectionView introduced at WWDC19, IOS 13 as a replacement for UITableViewDataSource and UICollectionViewDataSource.","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='167'%20viewBox='0%200%20400%20167'%20preserveAspectRatio='none'%3e%3cpath%20d='M109%2021L13%2098%200%20109v11l17-14A126111%20126111%200%2001144%201c1-1%201-1-5-1h-5l-25%2021m272%205L258%20163l-3%204h48l8-10a2005%202005%200%200066-79%20272%20272%200%200020-24l3-3V5l-19%2021'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":2.380952380952381,"src":"/static/4e4efdad88ff4607d90485cba60d3758/2a4de/diffable1.png","srcSet":"/static/4e4efdad88ff4607d90485cba60d3758/6d161/diffable1.png 150w,\n/static/4e4efdad88ff4607d90485cba60d3758/630fb/diffable1.png 300w,\n/static/4e4efdad88ff4607d90485cba60d3758/2a4de/diffable1.png 600w,\n/static/4e4efdad88ff4607d90485cba60d3758/db955/diffable1.png 900w,\n/static/4e4efdad88ff4607d90485cba60d3758/f3583/diffable1.png 1200w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}}]}},"pageContext":{"postPath":"blog/keypaths-in-swift","translations":[{"hreflang":"en","path":"/blog/keypaths-in-swift"}]}},"staticQueryHashes":["4097791827"]}